<div id="users">

  <table class="w-100 table table-sm table-hover">
    <% if @users.size == 0 %>
      <tr>
        <td>No users found, how did that even happen?</td>
      </tr>
    <% else %>
      <thead class="table-light">
        <tr>
          <th scope="col" rowspan="2">ID:</th>
          <th scope="col" rowspan="2">Username:</th>
          <% if admin %>
            <th scope="col" rowspan="2">Email:</th>
          <% end %>
          <th scope="col" colspan="<%= admin ? 3 : 1 %>"
            rowspan="<%= admin ? 1 : 2 %>" class="text-center">Models:</th>
          <th scope="col" colspan="2" class="text-center">Social:</th>
          <th scope="col" rowspan="2">Joined:</th>
          <% if admin %>
            <th scope="col" rowspan="2">Updated:</th>
          <% end %>
          <th scope="col" rowspan="2"></th>
        </tr>
        <tr>
          <% if admin %>
            <th scope="col"># Public</th>
            <th scope="col"># Private</th>
            <th scope="col"># Followers</th>
          <% end %>
          <th scope="col"># Following:</th>
          <th scope="col"># Followers:</th>
        </tr>
      </thead>
      <tbody>
        <% @users.each do |user| %>
          <tr class="pb-2">
            <td scope="row"><%= user.id %></td>
            <td><%= user.username %></td>
            <% if admin %>
              <td><%= user.email %></td>
            <% end %>
            <% if admin %>
              <td><%= getPublicModelsForUser(user).count %></td>
              <td><%= getPrivateModelsForUser(user).count %></td>
              <td><%= getFollowingModelsForUser(user).count %></td>
            <% else %>
              <td><%= getModelsVisibleForUser(user).count %></td>
            <% end %>
            <td><%= getFollowingForUser(user).count %></td>
            <td><%= getFollowersForUser(user).count %></td>
            <td><%= formatTime(user.created_at) %></td>
            <% if admin %>
              <td><%= formatTime(user.updated_at) %></td>
            <% end %>
            <td class="text-end">
              <%= link_to user, class: "btn btn-success btn-sm" do %>
                <i class="bi bi-person-fill"></i>
              <% end %>  
            </td>
          </tr>
        <% end %>
        <% if @users.size < 10 %>
            <% (10-@users.size).times do %>
              <tr class="borderless-cell" style="visibility: hidden;"><td class="borderless-cell" style="visibility: hidden;">blank</td></tr>
            <% end %>
        <% end %>
      </tbody> 
    <% end %>
  </table>
  <div class="flex-grow-1"></div>
  <div class="d-flex justify-content-center">
    <%= paginate @users,
          param_name: :page,
          theme: 'bootstrap-5',
          pagination_class: "pagination-sm flex-wrap justify-content-center",
          nav_class: "d-inline-block"
    %>
  </div>   
</div>